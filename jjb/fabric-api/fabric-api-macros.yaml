- property:
    name: 'fabric-api-x86_64'
    properties:
        - inject:
            properties-content: |
                ARCH=x86_64
                JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64

- scm:
    name: hyperledger-fabric-api-gerrit
    scm:
        - git:
            url: 'ssh://hyperledger-jobbuilder@gerrit.hyperledger.org:29418/fabric-api'
            branches:
               - 'origin/$GERRIT_BRANCH'
            wipe-workspace: true
            credentials-id: '{credentials-id}'
            refspec: '$GERRIT_REFSPEC'
            choosing-strategy: 'gerrit'

- builder:
    name: fabric-api-clean-environment
    builders:
        - maven-target:
            maven-version: Maven3
            goals: clean

- builder:
    name: fabric-api-compile
    builders:
        - maven-target:
            maven-version: Maven3
            goals: package

- publisher:
    name: compile-results
    publishers:
        - junit:
            results: '$WORKSPACE/api/target/surefire-reports/*.xml'
